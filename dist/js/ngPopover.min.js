var app=angular.module("ngPopover",[]);app.directive("ngPopover",function(){return{restrict:"EA",scope:{direction:"@",trigger:"@",onClose:"&",onOpen:"&",maxHeight:"@",popoverClass:"@",width:"@",height:"@"},replace:!0,transclude:!0,link:function(e,t,r,n){n.document;e.show=!1,e.popoverClass=r.popoverClass,e.style={width:r.width,height:r.height};var o,i,s=angular.element("#"+e.trigger),a=angular.element('.generic-dropdown[trigger="'+e.trigger+'"]');e.dropDirection=r.direction||"bottom",s.bind("click",function(t){var r=angular.element("#"+e.trigger),o=angular.element('.generic-dropdown[trigger="'+e.trigger+'"]');t.preventDefault(),l(r,o),angular.element(".generic-dropdown").not('[trigger="'+e.trigger+'"]').addClass("hide"),o.toggleClass("hide"),o.hasClass("hide")?e.onClose():(n.registerBodyListener(),e.onOpen())}),a.bind("click",function(e){e.stopPropagation()});var d=function(){return s.offset()},l=function(t,r){switch(e.dropDirection){case"left":var n=r.toggleClass("hide").outerWidth();r.toggleClass("hide"),o=d().left-n-10+"px",i=d().top+"px";break;case"right":o=d().left+t.outerWidth()+10+"px",i=d().top+"px";break;case"top":var s=r.toggleClass("hide").outerHeight();r.toggleClass("hide"),o=d().left+"px",i=d().top-s-10+"px";break;default:o=d().left+"px",i=d().top+t.outerHeight()+10+"px"}r.css({position:"absolute",left:o,top:i})};l(s,a)},controller:function(e,t){this.document=t;var r=function(t){var n=t.target,o=!1;do if(n!=document&&n.classList&&(n.classList.contains("generic-dropdown")||n.classList.contains("ng-popover-trigger"))){o=!0;break}while(n=n.parentNode);o||(angular.element(".generic-dropdown").addClass("hide"),document.body.removeEventListener("click",r),e.onClose())};this.registerBodyListener=function(){document.body.addEventListener("click",r)},this.unregisterBodyListerner=function(){document.body.removeEventListener("click",r)}},template:'<div class="generic-dropdown hide" ng-style="style"><div class="generic-dropdown-wrapper {{dropDirection}}"><div class="generic-dropdown-content" style="max-height:{{maxHeight}}" ng-class="popoverClass"><ng-transclude></ng-transclude></div></div></div>'}}),app.service("genericDropdownService",function(){return{closeDropdown:function(e){angular.element(".generic-dropdown[trigger="+e+"]").addClass("hide")},closeAll:function(){angular.element(".generic-dropdown").addClass("hide")}}});