!function(e){"use strict";var t=e.module("ngPopover",[]);t.directive("ngPopover",function(){return{restrict:"EA",scope:{direction:"@",trigger:"@",onClose:"&",onOpen:"&",popoverClass:"@"},replace:!0,transclude:!0,link:function(t,o,r,n){t.popoverClass=r.popoverClass,t.dropDirection=r.direction||"bottom";var i,s,l=e.element("#"+t.trigger),p=e.element('.ng-popover[trigger="'+t.trigger+'"]');l.bind("click",function(o){var r=e.element("#"+t.trigger),i=e.element('.ng-popover[trigger="'+t.trigger+'"]');o.preventDefault(),c(r,i),e.element(".ng-popover").not('[trigger="'+t.trigger+'"]').addClass("hide"),i.toggleClass("hide"),i.hasClass("hide")?(n.unregisterBodyListener(),t.onClose(),t.$apply()):(n.registerBodyListener(),t.onOpen(),t.$apply())});var a=function(){return l.offset()},c=function(e,o){switch(t.dropDirection){case"left":var r=o.toggleClass("hide").outerWidth();o.toggleClass("hide"),i=a().left-r-10+"px",s=a().top+"px";break;case"right":i=a().left+e.outerWidth()+10+"px",s=a().top+"px";break;case"top":var n=o.toggleClass("hide").outerHeight();o.toggleClass("hide"),i=a().left+"px",s=a().top-n-10+"px";break;default:i=a().left+"px",s=a().top+e.outerHeight()+10+"px"}o.css({position:"absolute",left:i,top:s})};c(l,p)},controller:["$scope",function(t){var o=function(r){var n=r.target,i=!1;do if(n!=document&&n.classList&&(n.classList.contains("ng-popover")||n.classList.contains("ng-popover-trigger"))){i=!0;break}while(n=n.parentNode);i||(e.element(".ng-popover").addClass("hide"),document.body.removeEventListener("click",o),t.onClose(),t.$apply())};this.registerBodyListener=function(){document.body.addEventListener("click",o)},this.unregisterBodyListener=function(){document.body.removeEventListener("click",o)}}],template:'<div class="ng-popover hide"><div class="ng-popover-wrapper {{dropDirection}}"><div class="ng-popover-content" ng-class="popoverClass"><ng-transclude></ng-transclude></div></div></div>'}}),t.factory("ngPopoverFactory",function(){return{closePopover:function(t){e.element(".ng-popover[trigger="+t+"]").addClass("hide")},closeAll:function(){e.element(".ng-popover").addClass("hide")}}})}(angular);